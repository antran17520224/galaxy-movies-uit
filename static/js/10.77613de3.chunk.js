(this["webpackJsonpgalaxy-movies-client"]=this["webpackJsonpgalaxy-movies-client"]||[]).push([[10],{311:function(e,t){},312:function(e,t,n){"use strict";n(0),n(531),n(530),n(3)},313:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var c="www.galaxy-movies.heroku.com",a="AIzaSyDztP6SDtzPiVhZauiUZMWvQWF1ZCclh7w",i="http://localhost:4050/"},318:function(e,t,n){"use strict";var c=n(311);n.o(c,"DOMAIN_WEB")&&n.d(t,"DOMAIN_WEB",(function(){return c.DOMAIN_WEB})),n.o(c,"URL_CINEMA")&&n.d(t,"URL_CINEMA",(function(){return c.URL_CINEMA})),n.o(c,"YOUR_KEY_APP")&&n.d(t,"YOUR_KEY_APP",(function(){return c.YOUR_KEY_APP}));n(312);var a=n(313);n.d(t,"DOMAIN_WEB",(function(){return a.a})),n.d(t,"URL_CINEMA",(function(){return a.b})),n.d(t,"YOUR_KEY_APP",(function(){return a.c}));n(116)},476:function(e,t,n){},477:function(e,t,n){},480:function(e,t,n){},481:function(e,t,n){},482:function(e,t,n){},485:function(e,t,n){},486:function(e,t,n){},528:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n(53),i=n(38),s=n(58),o=n(64),r=n(0),l=n.n(r),d=n(22),j=(n(476),n(34)),b=n(278),u=n(524),h=n(522),p=n(533),m=n(523),g=n(11),f=n(281),x=n(304),O=n(490),v=n.n(O),N=n(487),w=n.n(N),k=n(488),y=n.n(k),S=n(489),_=n.n(S),I=n(8),C=n(521),P=n(537),T=(n(477),n(3)),F=Object(f.a)((function(e){return Object(x.a)({rootButton:{color:"#fff",width:"50px",height:"48px"},groupRoot:{margin:"0px auto","& .Mui-disabled":{backgroundColor:"#505050",color:"#fff",width:"50px",height:"48px"},"& .Mui-selected":{backgroundColor:"#24baef",color:"#fff",width:"50px",height:"48px"},"& .Mui-selected:hover":{backgroundColor:"#24baef",color:"#fff",width:"50px",height:"48px"}},groupRootDes:{"& .Mui-disabled":{backgroundColor:"#505050",color:"#fff",width:"50px",height:"48px"}}})})),A=function(e){var t=l.a.useState((function(){return[]})),n=Object(o.a)(t,2),c=n[0],a=n[1],i=l.a.useState(!1),s=Object(o.a)(i,2),r=s[0],d=s[1],j=F(),b=e.store.DetailPage.currentSession;return l.a.useEffect((function(){c.length>0&&!r&&(d(!0),e.actions.showNextButton(!0)),e.actions.handleChooseSeats({seats:c}),0===c.length&&(d(!1),e.actions.showNextButton(!1))}),[c.length,r]),Object(T.jsx)(l.a.Fragment,{children:Object(T.jsxs)("div",{className:"wrapper-seats-page",children:[Object(T.jsx)("div",{className:"title-screen",children:Object(T.jsx)("h1",{children:"Screen"})}),Object(T.jsx)("div",{className:"screen"}),Object(T.jsxs)("div",{className:"wrapper-description-seats",children:[Object(T.jsxs)("div",{className:"checked",children:[Object(T.jsx)("span",{className:"icon-checked",children:"A"}),Object(T.jsx)("span",{className:"title-checked",children:"\u0110ang ch\u1ecdn"})]}),Object(T.jsxs)("div",{className:"empty",children:[Object(T.jsx)("span",{className:"icon-empty",children:"A"}),Object(T.jsx)("span",{className:"title-empty",children:"C\xf2n tr\u1ed1ng"})]}),Object(T.jsxs)("div",{className:"occupied",children:[Object(T.jsx)("span",{className:"icon-occupied",children:"A"}),Object(T.jsx)("span",{className:"title-occupied",children:"\u0110\xe3 b\xe1n"})]})]}),Object(T.jsxs)("div",{className:"wrapper-seats",children:[Object(T.jsx)(P.a,{value:c,onChange:function(e,t){if(10===c.length)if(t.length<10)a(t);else{window.alert("B\u1ea1n ch\u1ec9 c\xf3 th\u1ec3 ch\u1ecdn t\u1ed1i \u0111a 10 gh\u1ebf !");var n=t.pop(),i=c.filter((function(e){return e!==n}));a(i)}c.length<10&&a(t)},"aria-label":"text formatting",classes:{root:j.groupRoot},style:{display:"inline"},children:null===b||void 0===b?void 0:b.theaters_id.seats.map((function(e,t){return Object(T.jsx)(C.a,{value:e.code,"aria-label":e.code,classes:{root:j.rootButton},disabled:1===e.isBooked,style:{border:"1px solid #fff",borderRadius:"none",marginLeft:"0"},children:e.code},t)}))}),Object(T.jsx)("div",{className:"note",children:"* L\u01b0u \xfd b\u1ea1n ch\u1ec9 c\xf3 th\u1ec3 ch\u1ecdn t\u1ed1i \u0111a 10 gh\u1ebf"})]})]})})},R=(n(480),n(288)),E=n(177),L=n.n(E),B=(n(481),function(e){var t=e.store.DetailPage.currentSession,n=e.store.TicketingPage,c=n.seats,a=n.priceFood,i=n.quantityFood,s=n.foodRecords;return l.a.useEffect((function(){}),[a]),Object(T.jsx)(l.a.Fragment,{children:Object(T.jsxs)(R.a,{container:!0,className:"wrapper-ticket",children:[Object(T.jsx)("div",{className:"bg-top-ticket"}),Object(T.jsx)(R.a,{item:!0,xs:2,className:"wrapper-movie-being-booked",children:Object(T.jsx)("div",{className:"wrapper-image",children:Object(T.jsx)("img",{src:null===t||void 0===t?void 0:t.movie_id.smallImage,alt:"img-movies"})})}),Object(T.jsxs)(R.a,{item:!0,xs:4,className:"ticket-theater",children:[Object(T.jsxs)("div",{className:"name-theater",children:["T\xean r\u1ea1p : ",Object(T.jsx)("span",{children:null===t||void 0===t?void 0:t.cinema_id.cinema_Name})]}),Object(T.jsxs)("div",{className:"time-showing",children:["Su\u1ea5t chi\u1ebfu : ",Object(T.jsx)("span",{children:null===t||void 0===t?void 0:t.time})]}),Object(T.jsxs)("div",{className:"date-showing",children:["Ng\xe0y chi\u1ebfu :"," ",Object(T.jsx)("span",{children:L()(null===t||void 0===t?void 0:t.date).format("L")})]})]}),Object(T.jsxs)(R.a,{item:!0,xs:5,className:"cart",children:[Object(T.jsxs)("div",{className:"seat-picking",children:["Gh\u1ebf \u0111ang ch\u1ecdn :",c.map((function(e,t){return 0===t?Object(T.jsx)("span",{style:{marginLeft:"10px"},children:"".concat(e)},t):Object(T.jsx)("span",{children:",\xa0".concat(e," ")},t)}))]}),Object(T.jsxs)("div",{className:"combo-food",children:["Combo food :",Object(T.jsxs)("span",{style:{marginLeft:"10px"},children:[(new Intl.NumberFormat).format(a),"\u0111"]})]}),Object(T.jsxs)("div",{className:"combo-food",children:["T\xean combo :",i.map((function(e,t){if(0!==e)return Object(T.jsx)("p",{style:{margin:"0"},children:s[t].food_Name+"x"+e},t)}))]}),Object(T.jsxs)("div",{className:"total-price",children:["T\u1ed5ng ti\u1ec1n :",Object(T.jsxs)("span",{style:{marginLeft:"10px"},children:[(new Intl.NumberFormat).format((null===t||void 0===t?void 0:t.price)*c.length+a)," ","\u0111"]})]})]}),Object(T.jsx)("div",{className:"bg-bottom-ticket"})]})})}),M=n(484),D=n.n(M),U=n(483),Y=n.n(U),W=(n(482),function(e){var t=e.store.TicketingPage.foodRecords,n=l.a.useState([]),c=Object(o.a)(n,2),a=c[0],i=c[1],s=l.a.useState(0),r=Object(o.a)(s,2),d=r[0],j=r[1],b=l.a.useState(!1),u=Object(o.a)(b,2),h=u[0],p=u[1];l.a.useEffect((function(){0===t.length&&(e.actions.getAllFoods(),window.scroll(0,0)),0===a.length&&t.forEach((function(e){a.push(0),i(a),p(!0)}))}),[a.length,t.length,h]);return Object(T.jsx)(l.a.Fragment,{children:Object(T.jsx)("div",{className:"wrapper-foods-page",children:Object(T.jsx)(R.a,{container:!0,style:{alignItems:"flex-end"},children:t&&t.map((function(n,c){return Object(T.jsx)(R.a,{item:!0,xs:3,children:Object(T.jsx)("div",{className:"wrapper-foods",children:Object(T.jsxs)("div",{className:"foods",children:[Object(T.jsx)("div",{className:"img-food",children:Object(T.jsx)("img",{src:n.food_Image,alt:"foods"})}),Object(T.jsxs)("div",{className:"wrapper-foods-name",children:[Object(T.jsx)("h2",{className:"name",children:n.food_Name}),Object(T.jsx)("div",{className:"description",children:n.desc}),Object(T.jsx)("div",{className:"note",children:"***Nh\u1eadn trong ng\xe0y xem phim***"}),Object(T.jsxs)("div",{className:"price",children:["Gi\xe1 :"," ",Object(T.jsxs)("span",{children:[" ",(new Intl.NumberFormat).format(n.price)," ","\u0111"]})]})]}),Object(T.jsxs)("div",{className:"wrapper-button",children:[Object(T.jsx)("span",{className:"sub",children:Object(T.jsx)(Y.a,{onClick:function(){return function(n){if(a[n]<=t[n].quantity&&a[n]>0){a[n]--;var c=d;c-=t[n].price,j(c),e.actions.handleChooseFoods({priceFood:c,arrayQuantity:a}),i(a),p(!h)}}(c)}})}),Object(T.jsx)("span",{className:"amount",children:a[c]}),Object(T.jsx)("span",{className:"add",children:Object(T.jsx)(D.a,{onClick:function(){return function(n){if(a[n]<t[n].quantity){a[n]++;var c=d;c+=t[n].price,j(c),e.actions.handleChooseFoods({priceFood:c,arrayQuantity:a}),i(a),p(!h)}}(c)}})})]})]})})},c)}))})})})}),q=n(372),z=n(493),K=n(315),Q=n(318),Z=(n(485),function(e){var t=e.store.TicketingPage,n=t.linkPayment,c=t.seats,a=t.priceFood,i=t.quantityFood,s=t.foodRecords,r=l.a.useState([]),d=Object(o.a)(r,2),j=d[0],u=d[1],h=l.a.useState([]),p=Object(o.a)(h,2),m=p[0],g=p[1],f=e.store.DetailPage.currentSession,x=e.store.LoginPage.userInfo,O=e.store.TicketingPage,v=O.isCreateTicketSuccess,N=O.idTicket;l.a.useEffect((function(){i.map((function(e,t){0!==e&&(j.push(s[t]._id),u(j),m.push(e),g(m))})),window.scroll(20,0),x||window.location.assign(Q.DOMAIN_WEB),v&&e.actions.confirmPayment({amount:(null===f||void 0===f?void 0:f.price)*c.length+a,bankCode:"NCB",orderDescription:N,orderType:"test",orderInfo:"test"})}),[n,v]);var w=Object(K.a)(),k=w.register,y=w.handleSubmit,S=w.errors;return x&&Object(T.jsxs)("div",{className:"wrapper-payment",children:[Object(T.jsx)("h1",{style:{textAlign:"center",marginBottom:"30px",fontSize:"30px"},children:"Th\xf4ng tin gi\u1ecf h\xe0ng"}),Object(T.jsxs)("div",{className:"wrapper-user-info",children:[Object(T.jsxs)("span",{children:["T\xean : ",x.fullName]}),Object(T.jsxs)("span",{children:["Email : ",x.email]}),Object(T.jsxs)("span",{children:["S\u1ed1 \u0111i\u1ec7n tho\u1ea1i : ",x.phone]})]}),Object(T.jsx)("div",{className:"button-payment",children:Object(T.jsxs)("form",{className:"form",onSubmit:y((function(t){j.length>0?e.actions.createTicket({seatCodes:c,sessionId:null===f||void 0===f?void 0:f._id,totalPrice:(null===f||void 0===f?void 0:f.price)*c.length+a,foodId:j,quantityFood:m,movieId:null===f||void 0===f?void 0:f.movie_id._id,theatersId:null===f||void 0===f?void 0:f.theaters_id._id,cinemaId:null===f||void 0===f?void 0:f.cinema_id._id}):e.actions.createTicket({seatCodes:c,sessionId:null===f||void 0===f?void 0:f._id,totalPrice:(null===f||void 0===f?void 0:f.price)*c.length+a,movieId:null===f||void 0===f?void 0:f.movie_id._id,theatersId:null===f||void 0===f?void 0:f.theaters_id._id,cinemaId:null===f||void 0===f?void 0:f.cinema_id._id})})),children:[Object(T.jsx)(q.a,{control:Object(T.jsx)(z.a,{value:!0,color:"primary",name:"accept"}),label:"T\xf4i \u0111\u1ed3ng \xfd \u0111i\u1ec1u kho\u1ea3n s\u1eed d\u1ee5ng",inputRef:k({required:"B\u1eaft bu\u1ed9c"})}),S.accept&&Object(T.jsx)("p",{children:S.accept.message}),Object(T.jsx)(b.a,{style:{backgroundColor:"rgba(0,212,255,1)",color:"#fff",display:"block",marginTop:"10px"},variant:"outlined",type:"submit",children:"Thanh to\xe1n"})]})})]})}),G=n(117),H=(n(486),function(e){var t=e.store.TicketingPage,n=t.ticketsByUserId,c=t.linkPayment,a=l.a.useState(!0),i=Object(o.a)(a,2),s=i[0],r=i[1],d=l.a.useState(1),j=Object(o.a)(d,2),b=j[0],u=j[1],h=l.a.useState(!0),p=Object(o.a)(h,2),m=p[0],g=p[1];return l.a.useEffect((function(){1===b&&s&&c&&(e.actions.getTicketByIdUser(),window.open("".concat(c)),r(!1)),setTimeout((function(){u(3)}),12e4);var t=n.length,a=n.length;n&&n.map((function(c,i){"waiting"===c.status&&(a-=1),t-1===i&&(a===n.length?(u(2),g(!1)):setTimeout((function(){e.actions.getTicketByIdUser()}),1e4))}))}),[n,b,c]),Object(T.jsx)(l.a.Fragment,{children:1===b?Object(T.jsx)(G.c,{spinning:m}):2===b?Object(T.jsx)("h1",{style:{textAlign:"center",color:"#47c7c5"},children:"Payment Successful !"}):Object(T.jsx)("h1",{style:{textAlign:"center",color:"#b02529"},children:"Payment Fail !!!"})})}),J=Object(g.a)({alternativeLabel:{top:22},active:{"& $line":{backgroundImage:"linear-gradient( 136deg, rgb(242,113,33) 0%, rgb(233,64,87) 50%, rgb(138,35,135) 100%)",boxShadow:"0 4px 10px 0 rgba(0,0,0,.25)"}},completed:{"& $line":{backgroundImage:"linear-gradient( 136deg, rgb(242,113,33) 0%, rgb(233,64,87) 50%, rgb(138,35,135) 100%)"}},line:{height:3,border:0,backgroundColor:"#eaeaf0",borderRadius:1}})(h.a),$=Object(f.a)({root:{backgroundColor:"#ccc",zIndex:1,color:"#fff",width:50,height:50,display:"flex",borderRadius:"50%",justifyContent:"center",alignItems:"center"},active:{backgroundImage:"linear-gradient(270deg, rgba(9,41,121,1) 19%, rgba(0,212,255,1) 100%);",boxShadow:"0 4px 10px 0 rgba(0,0,0,.25)"},completed:{backgroundImage:"linear-gradient(270deg, rgba(9,41,121,1) 19%, rgba(0,212,255,1) 100%);"}});function V(e){var t,n=$(),c=e.active,a=e.completed,i={1:Object(T.jsx)(w.a,{}),2:Object(T.jsx)(y.a,{}),3:Object(T.jsx)(_.a,{}),4:Object(T.jsx)(v.a,{})};return Object(T.jsx)("div",{className:Object(I.a)(n.root,(t={},Object(j.a)(t,n.active,c),Object(j.a)(t,n.completed,a),t)),children:i[String(e.icon)]})}var X=Object(f.a)((function(e){return Object(x.a)({root:{width:"100%"},button:{marginRight:e.spacing(1),position:"absolute",right:"18%"},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},stepperRoot:{backgroundColor:"transparent",padding:0},stepLabel:{color:"#bdbdbd",fontSize:"15px"},stepLabelRoot:{"& .MuiStepLabel-label.MuiStepLabel-active":{color:"#fff"},"& .MuiStepLabel-label.MuiStepLabel-completed":{color:"#fff"}}})}));var ee=function(e){var t=X(),n=["Ch\u1ecdn gh\u1ebf","Ch\u1ecdn \u0111\u1ed3 \u0103n","Thanh to\xe1n","Ho\xe0n th\xe0nh"],a=e.store.TicketingPage.activeStep,i=e.store.TicketingPage.isShowNextButton;return Object(T.jsxs)("div",{className:t.root,children:[Object(T.jsx)(m.a,{alternativeLabel:!0,activeStep:a,connector:Object(T.jsx)(J,{}),classes:{root:t.stepperRoot},children:n.map((function(e){return Object(T.jsx)(u.a,{children:Object(T.jsx)(p.a,{StepIconComponent:V,classes:{label:t.stepLabel,root:t.stepLabelRoot},children:e})},e)}))}),Object(T.jsx)(T.Fragment,{children:a===n.length?Object(T.jsx)(T.Fragment,{}):Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)("div",{className:"wrapper-step-content",children:[function(t){switch(t){case 0:return Object(T.jsx)(A,Object(c.a)({},e));case 1:return Object(T.jsx)(W,Object(c.a)({},e));case 2:return Object(T.jsx)(Z,Object(c.a)({},e));case 3:return Object(T.jsx)(H,Object(c.a)({},e));default:return"Unknown step"}}(a),Object(T.jsx)(B,Object(c.a)({},e))]}),i&&Object(T.jsx)(b.a,{variant:"contained",color:"primary",onClick:function(){e.actions.handleActiveStep({activeStep:a+1})},className:t.button,style:{display:a>1?"none":"block"},children:a===n.length-1?"Ho\xe0n th\xe0nh":"K\u1ebf ti\u1ebfp"})]})})]})},te=function(e){var t=l.a.useState(!0),n=Object(o.a)(t,2),a=n[0],i=n[1],s=e.store.DetailPage.currentSession,r=e.store.TicketingPage.isProcessing,j=Object(d.g)();return l.a.useEffect((function(){setTimeout((function(){i(!1)}),1500),a&&window.scrollTo(0,0),null===s&&j.push("/")}),[r]),Object(T.jsxs)(l.a.Fragment,{children:[Object(T.jsx)(G.b,{spinning:a,opacity:1}),Object(T.jsx)(G.b,{spinning:r,opacity:1}),s&&Object(T.jsx)(T.Fragment,{children:Object(T.jsx)("div",{className:"wrapper-ticketing-page",children:Object(T.jsx)(ee,Object(c.a)({},e))})})]})};t.default=Object(d.i)(Object(s.c)((function(e){return{store:e}}),(function(e){var t=Object(c.a)({},a);return{actions:Object(i.bindActionCreators)(t,e)}}))(te))}}]);
//# sourceMappingURL=10.77613de3.chunk.js.map