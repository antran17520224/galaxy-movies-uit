(this["webpackJsonpgalaxy-movies-client"]=this["webpackJsonpgalaxy-movies-client"]||[]).push([[12],{462:function(e,t,c){},463:function(e,t,c){},466:function(e,t,c){},467:function(e,t,c){},468:function(e,t,c){},471:function(e,t,c){},472:function(e,t,c){},510:function(e,t,c){"use strict";c.r(t);var n=c(2),a=c(53),i=c(38),s=c(58),o=c(65),r=c(0),l=c.n(r),d=c(22),j=(c(462),c(34)),b=c(278),h=c(506),u=c(504),p=c(515),m=c(505),g=c(11),x=c(281),f=c(304),O=c(476),v=c.n(O),N=c(473),k=c.n(N),y=c(474),w=c.n(y),S=c(475),T=c.n(S),C=c(8),I=c(503),F=c(519),_=(c(463),c(3)),P=Object(x.a)((function(e){return Object(f.a)({rootButton:{color:"#fff",width:"50px",height:"48px"},groupRoot:{margin:"0px auto","& .Mui-disabled":{backgroundColor:"#505050",color:"#fff",width:"50px",height:"48px"},"& .Mui-selected":{backgroundColor:"#24baef",color:"#fff",width:"50px",height:"48px"},"& .Mui-selected:hover":{backgroundColor:"#24baef",color:"#fff",width:"50px",height:"48px"}},groupRootDes:{"& .Mui-disabled":{backgroundColor:"#505050",color:"#fff",width:"50px",height:"48px"}}})})),L=function(e){var t=l.a.useState((function(){return[]})),c=Object(o.a)(t,2),n=c[0],a=c[1],i=l.a.useState(!1),s=Object(o.a)(i,2),r=s[0],d=s[1],j=P(),b=e.store.DetailPage.currentSession;return l.a.useEffect((function(){n.length>0&&!r&&(d(!0),e.actions.showNextButton(!0)),e.actions.handleChooseSeats({seats:n}),0===n.length&&(d(!1),e.actions.showNextButton(!1))}),[n.length,r]),Object(_.jsx)(l.a.Fragment,{children:Object(_.jsxs)("div",{className:"wrapper-seats-page",children:[Object(_.jsx)("div",{className:"title-screen",children:Object(_.jsx)("h1",{children:"Screen"})}),Object(_.jsx)("div",{className:"screen"}),Object(_.jsxs)("div",{className:"wrapper-description-seats",children:[Object(_.jsxs)("div",{className:"checked",children:[Object(_.jsx)("span",{className:"icon-checked",children:"A"}),Object(_.jsx)("span",{className:"title-checked",children:"\u0110ang ch\u1ecdn"})]}),Object(_.jsxs)("div",{className:"empty",children:[Object(_.jsx)("span",{className:"icon-empty",children:"A"}),Object(_.jsx)("span",{className:"title-empty",children:"C\xf2n tr\u1ed1ng"})]}),Object(_.jsxs)("div",{className:"occupied",children:[Object(_.jsx)("span",{className:"icon-occupied",children:"A"}),Object(_.jsx)("span",{className:"title-occupied",children:"\u0110\xe3 b\xe1n"})]})]}),Object(_.jsxs)("div",{className:"wrapper-seats",children:[Object(_.jsx)(F.a,{value:n,onChange:function(e,t){if(10===n.length)if(t.length<10)a(t);else{window.alert("B\u1ea1n ch\u1ec9 c\xf3 th\u1ec3 ch\u1ecdn t\u1ed1i \u0111a 10 gh\u1ebf !");var c=t.pop(),i=n.filter((function(e){return e!==c}));a(i)}n.length<10&&a(t)},"aria-label":"text formatting",classes:{root:j.groupRoot},style:{display:"inline"},children:null===b||void 0===b?void 0:b.theaters_id.seats.map((function(e,t){return Object(_.jsx)(I.a,{value:e.code,"aria-label":e.code,classes:{root:j.rootButton},disabled:1===e.isBooked,style:{border:"1px solid #fff",borderRadius:"none",marginLeft:"0"},children:e.code},t)}))}),Object(_.jsx)("div",{className:"note",children:"* L\u01b0u \xfd b\u1ea1n ch\u1ec9 c\xf3 th\u1ec3 ch\u1ecdn t\u1ed1i \u0111a 10 gh\u1ebf"})]})]})})},R=(c(466),c(288)),B=c(177),A=c.n(B),E=(c(467),function(e){var t=e.store.DetailPage.currentSession,c=e.store.TicketingPage,n=c.seats,a=c.priceFood,i=c.quantityFood,s=c.foodRecords;return l.a.useEffect((function(){}),[a]),Object(_.jsx)(l.a.Fragment,{children:Object(_.jsxs)(R.a,{container:!0,className:"wrapper-ticket",children:[Object(_.jsx)("div",{className:"bg-top-ticket"}),Object(_.jsx)(R.a,{item:!0,xs:2,className:"wrapper-movie-being-booked",children:Object(_.jsx)("div",{className:"wrapper-image",children:Object(_.jsx)("img",{src:null===t||void 0===t?void 0:t.movie_id.smallImage,alt:"img-movies"})})}),Object(_.jsxs)(R.a,{item:!0,xs:4,className:"ticket-theater",children:[Object(_.jsxs)("div",{className:"name-theater",children:["T\xean r\u1ea1p : ",Object(_.jsx)("span",{children:null===t||void 0===t?void 0:t.cinema_id.cinema_Name})]}),Object(_.jsxs)("div",{className:"time-showing",children:["Su\u1ea5t chi\u1ebfu : ",Object(_.jsx)("span",{children:null===t||void 0===t?void 0:t.time})]}),Object(_.jsxs)("div",{className:"date-showing",children:["Ng\xe0y chi\u1ebfu :"," ",Object(_.jsx)("span",{children:A()(null===t||void 0===t?void 0:t.date).format("L")})]})]}),Object(_.jsxs)(R.a,{item:!0,xs:5,className:"cart",children:[Object(_.jsxs)("div",{className:"seat-picking",children:["Gh\u1ebf \u0111ang ch\u1ecdn :",n.map((function(e,t){return 0===t?Object(_.jsx)("span",{style:{marginLeft:"10px"},children:"".concat(e)},t):Object(_.jsx)("span",{children:",\xa0".concat(e," ")},t)}))]}),Object(_.jsxs)("div",{className:"combo-food",children:["Combo food :",Object(_.jsxs)("span",{style:{marginLeft:"10px"},children:[(new Intl.NumberFormat).format(a),"\u0111"]})]}),Object(_.jsxs)("div",{className:"combo-food",children:["T\xean combo :",i.map((function(e,t){if(0!==e)return Object(_.jsx)("p",{style:{margin:"0"},children:s[t].food_Name+"x"+e},t)}))]}),Object(_.jsxs)("div",{className:"total-price",children:["T\u1ed5ng ti\u1ec1n :",Object(_.jsxs)("span",{style:{marginLeft:"10px"},children:[(new Intl.NumberFormat).format((null===t||void 0===t?void 0:t.price)*n.length+a)," ","\u0111"]})]})]}),Object(_.jsx)("div",{className:"bg-bottom-ticket"})]})})}),M=c(470),q=c.n(M),D=c(469),U=c.n(D),z=(c(468),function(e){var t=e.store.TicketingPage.foodRecords,c=l.a.useState([]),n=Object(o.a)(c,2),a=n[0],i=n[1],s=l.a.useState(0),r=Object(o.a)(s,2),d=r[0],j=r[1],b=l.a.useState(!1),h=Object(o.a)(b,2),u=h[0],p=h[1];l.a.useEffect((function(){0===t.length&&(e.actions.getAllFoods(),window.scroll(0,0)),0===a.length&&t.forEach((function(e){a.push(0),i(a),p(!0)}))}),[a.length,t.length,u]);return Object(_.jsx)(l.a.Fragment,{children:Object(_.jsx)("div",{className:"wrapper-foods-page",children:Object(_.jsx)(R.a,{container:!0,style:{alignItems:"flex-end"},children:t&&t.map((function(c,n){return Object(_.jsx)(R.a,{item:!0,xs:3,children:Object(_.jsx)("div",{className:"wrapper-foods",children:Object(_.jsxs)("div",{className:"foods",children:[Object(_.jsx)("div",{className:"img-food",children:Object(_.jsx)("img",{src:c.food_Image,alt:"foods"})}),Object(_.jsxs)("div",{className:"wrapper-foods-name",children:[Object(_.jsx)("h2",{className:"name",children:c.food_Name}),Object(_.jsx)("div",{className:"description",children:c.desc}),Object(_.jsx)("div",{className:"note",children:"***Nh\u1eadn trong ng\xe0y xem phim***"}),Object(_.jsxs)("div",{className:"price",children:["Gi\xe1 :"," ",Object(_.jsxs)("span",{children:[" ",(new Intl.NumberFormat).format(c.price)," ","\u0111"]})]})]}),Object(_.jsxs)("div",{className:"wrapper-button",children:[Object(_.jsx)("span",{className:"sub",children:Object(_.jsx)(U.a,{onClick:function(){return function(c){if(a[c]<=t[c].quantity&&a[c]>0){a[c]--;var n=d;n-=t[c].price,j(n),e.actions.handleChooseFoods({priceFood:n,arrayQuantity:a}),i(a),p(!u)}}(n)}})}),Object(_.jsx)("span",{className:"amount",children:a[n]}),Object(_.jsx)("span",{className:"add",children:Object(_.jsx)(q.a,{onClick:function(){return function(c){if(a[c]<t[c].quantity){a[c]++;var n=d;n+=t[c].price,j(n),e.actions.handleChooseFoods({priceFood:n,arrayQuantity:a}),i(a),p(!u)}}(n)}})})]})]})})},n)}))})})})}),G=c(369),H=c(479),J=c(317),Q=(c(471),function(e){var t=e.store.TicketingPage,c=t.linkPayment,n=t.seats,a=t.priceFood,i=t.quantityFood,s=t.foodRecords,r=l.a.useState([]),d=Object(o.a)(r,2),j=d[0],h=d[1],u=l.a.useState([]),p=Object(o.a)(u,2),m=p[0],g=p[1],x=e.store.DetailPage.currentSession,f=e.store.LoginPage.userInfo,O=e.store.TicketingPage,v=O.isCreateTicketSuccess,N=O.idTicket;l.a.useEffect((function(){i.map((function(e,t){0!==e&&(j.push(s[t]._id),h(j),m.push(e),g(m))})),window.scroll(20,0),v&&e.actions.confirmPayment({amount:(null===x||void 0===x?void 0:x.price)*n.length+a,bankCode:"NCB",orderDescription:N,orderType:"test",orderInfo:"test"})}),[c,v]);var k=Object(J.a)(),y=k.register,w=k.handleSubmit,S=k.errors;return f&&Object(_.jsxs)("div",{className:"wrapper-payment",children:[Object(_.jsx)("h1",{style:{textAlign:"center",marginBottom:"30px",fontSize:"30px"},children:"Th\xf4ng tin gi\u1ecf h\xe0ng"}),Object(_.jsxs)("div",{className:"wrapper-user-info",children:[Object(_.jsxs)("span",{children:["T\xean : ",f.fullName]}),Object(_.jsxs)("span",{children:["Email : ",f.email]}),Object(_.jsxs)("span",{children:["S\u1ed1 \u0111i\u1ec7n tho\u1ea1i : ",f.phone]})]}),Object(_.jsx)("div",{className:"button-payment",children:Object(_.jsxs)("form",{className:"form",onSubmit:w((function(t){j.length>0?e.actions.createTicket({seatCodes:n,sessionId:null===x||void 0===x?void 0:x._id,totalPrice:(null===x||void 0===x?void 0:x.price)*n.length+a,foodId:j,quantityFood:m,movieId:null===x||void 0===x?void 0:x.movie_id._id,theatersId:null===x||void 0===x?void 0:x.theaters_id._id,cinemaId:null===x||void 0===x?void 0:x.cinema_id._id}):e.actions.createTicket({seatCodes:n,sessionId:null===x||void 0===x?void 0:x._id,totalPrice:(null===x||void 0===x?void 0:x.price)*n.length+a,movieId:null===x||void 0===x?void 0:x.movie_id._id,theatersId:null===x||void 0===x?void 0:x.theaters_id._id,cinemaId:null===x||void 0===x?void 0:x.cinema_id._id})})),children:[Object(_.jsx)(G.a,{control:Object(_.jsx)(H.a,{value:!0,color:"primary",name:"accept"}),label:"T\xf4i \u0111\u1ed3ng \xfd \u0111i\u1ec1u kho\u1ea3n s\u1eed d\u1ee5ng",inputRef:y({required:"B\u1eaft bu\u1ed9c"})}),S.accept&&Object(_.jsx)("p",{children:S.accept.message}),Object(_.jsx)(b.a,{style:{backgroundColor:"rgba(0,212,255,1)",color:"#fff",display:"block",marginTop:"10px"},variant:"outlined",type:"submit",children:"Thanh to\xe1n"})]})})]})}),$=(c(472),function(e){var t=e.store.TicketingPage,c=t.ticketsByUserId,n=t.linkPayment,a=l.a.useState(!0),i=Object(o.a)(a,2),s=i[0],r=i[1],d=l.a.useState(1),j=Object(o.a)(d,2),b=j[0],h=j[1],u=l.a.useState(!0),p=Object(o.a)(u,2),m=(p[0],p[1]);return l.a.useEffect((function(){1===b&&s&&n&&(e.actions.getTicketByIdUser(),window.open("".concat(n)),r(!1)),setTimeout((function(){h(3)}),12e4);var t=c.length,a=c.length;c&&c.map((function(n,i){"waiting"===n.status&&(a-=1),t-1===i&&(a===c.length?(h(2),m(!1)):setTimeout((function(){e.actions.getTicketByIdUser()}),1e4))}))}),[c,b,n]),Object(_.jsx)(l.a.Fragment,{children:1===b?Object(_.jsx)("h1",{style:{textAlign:"center",color:"#47c7c5"},children:"\u0110ang x\u1eed l\xfd thanh to\xe1n ..."}):2===b?Object(_.jsx)("h1",{style:{textAlign:"center",color:"#47c7c5"},children:"Payment Successful !"}):Object(_.jsx)("h1",{style:{textAlign:"center",color:"#b02529"},children:"Payment Fail !!!"})})}),K=Object(g.a)({alternativeLabel:{top:22},active:{"& $line":{backgroundImage:"linear-gradient( 136deg, rgb(242,113,33) 0%, rgb(233,64,87) 50%, rgb(138,35,135) 100%)",boxShadow:"0 4px 10px 0 rgba(0,0,0,.25)"}},completed:{"& $line":{backgroundImage:"linear-gradient( 136deg, rgb(242,113,33) 0%, rgb(233,64,87) 50%, rgb(138,35,135) 100%)"}},line:{height:3,border:0,backgroundColor:"#eaeaf0",borderRadius:1}})(u.a),V=Object(x.a)({root:{backgroundColor:"#ccc",zIndex:1,color:"#fff",width:50,height:50,display:"flex",borderRadius:"50%",justifyContent:"center",alignItems:"center"},active:{backgroundImage:"linear-gradient(270deg, rgba(9,41,121,1) 19%, rgba(0,212,255,1) 100%);",boxShadow:"0 4px 10px 0 rgba(0,0,0,.25)"},completed:{backgroundImage:"linear-gradient(270deg, rgba(9,41,121,1) 19%, rgba(0,212,255,1) 100%);"}});function W(e){var t,c=V(),n=e.active,a=e.completed,i={1:Object(_.jsx)(k.a,{}),2:Object(_.jsx)(w.a,{}),3:Object(_.jsx)(T.a,{}),4:Object(_.jsx)(v.a,{})};return Object(_.jsx)("div",{className:Object(C.a)(c.root,(t={},Object(j.a)(t,c.active,n),Object(j.a)(t,c.completed,a),t)),children:i[String(e.icon)]})}var X=Object(x.a)((function(e){return Object(f.a)({root:{width:"100%"},button:{marginRight:e.spacing(1),position:"absolute",right:"18%"},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},stepperRoot:{backgroundColor:"transparent",padding:0},stepLabel:{color:"#bdbdbd",fontSize:"15px"},stepLabelRoot:{"& .MuiStepLabel-label.MuiStepLabel-active":{color:"#fff"},"& .MuiStepLabel-label.MuiStepLabel-completed":{color:"#fff"}}})}));var Y=function(e){var t=X(),c=["Ch\u1ecdn gh\u1ebf","Ch\u1ecdn \u0111\u1ed3 \u0103n","Thanh to\xe1n","Ho\xe0n th\xe0nh"],a=e.store.TicketingPage.activeStep,i=e.store.TicketingPage.isShowNextButton;return Object(_.jsxs)("div",{className:t.root,children:[Object(_.jsx)(m.a,{alternativeLabel:!0,activeStep:a,connector:Object(_.jsx)(K,{}),classes:{root:t.stepperRoot},children:c.map((function(e){return Object(_.jsx)(h.a,{children:Object(_.jsx)(p.a,{StepIconComponent:W,classes:{label:t.stepLabel,root:t.stepLabelRoot},children:e})},e)}))}),Object(_.jsx)(_.Fragment,{children:a===c.length?Object(_.jsx)(_.Fragment,{}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("div",{className:"wrapper-step-content",children:[function(t){switch(t){case 0:return Object(_.jsx)(L,Object(n.a)({},e));case 1:return Object(_.jsx)(z,Object(n.a)({},e));case 2:return Object(_.jsx)(Q,Object(n.a)({},e));case 3:return Object(_.jsx)($,Object(n.a)({},e));default:return"Unknown step"}}(a),Object(_.jsx)(E,Object(n.a)({},e))]}),i&&Object(_.jsx)(b.a,{variant:"contained",color:"primary",onClick:function(){e.actions.handleActiveStep({activeStep:a+1})},className:t.button,style:{display:a>1?"none":"block"},children:a===c.length-1?"Ho\xe0n th\xe0nh":"K\u1ebf ti\u1ebfp"})]})})]})},Z=c(120),ee=function(e){var t=l.a.useState(!0),c=Object(o.a)(t,2),a=c[0],i=c[1],s=e.store.DetailPage.currentSession,r=e.store.TicketingPage.isProcessing,j=Object(d.g)();return l.a.useEffect((function(){setTimeout((function(){i(!1)}),1500),a&&window.scrollTo(0,0),null===s&&j.push("/")}),[r]),Object(_.jsxs)(l.a.Fragment,{children:[Object(_.jsx)(Z.b,{spinning:a,opacity:1,text:"Loading"}),Object(_.jsx)(Z.b,{spinning:r,opacity:1,text:"Loading"}),s&&Object(_.jsx)(_.Fragment,{children:Object(_.jsx)("div",{className:"wrapper-ticketing-page",children:Object(_.jsx)(Y,Object(n.a)({},e))})})]})};t.default=Object(d.i)(Object(s.c)((function(e){return{store:e}}),(function(e){var t=Object(n.a)({},a);return{actions:Object(i.bindActionCreators)(t,e)}}))(ee))}}]);
//# sourceMappingURL=12.170a7974.chunk.js.map